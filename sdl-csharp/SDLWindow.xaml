<Window x:Class="sdl.SDLWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:sdl"
        mc:Ignorable="d"
        d:DesignWidth="1600"
        Title="Simple YouTube Downloader" 
        Width="Auto" 
        Height="Auto" 
        SizeToContent="WidthAndHeight" 
        Foreground="#FFE8E8E8" 
        Background="#FF7C0606"
        FontSize="16"
        FontFamily="Raleway" >
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resource/Style/Button.xaml" />
                <ResourceDictionary Source="Resource/Style/TextBox.xaml" />
                <ResourceDictionary Source="Resource/Style/URLQueueEntry.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="Raleway">
                <Setter Property="TextElement.FontFamily" Value="Resource/Font/#Raleway" />
            </Style>
            <Style TargetType="ListBox">
                <Setter Property="Padding" Value="5, 7, 5, 7" />
                <Style.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="20, 20, 8, 8"/>
                    </Style>
                </Style.Resources>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid x:Name="MasterGrid" Background="#FF030812" MinWidth="400" MinHeight="400" UseLayoutRounding="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid x:Name="URLGroup"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Top"
              Grid.Column="0">
            <Border BorderBrush="Black" BorderThickness="1" Background="#3F46484A" CornerRadius="16" Margin="10,10,10,149">
                <Grid>
                    <Label x:Name="URLLabel"
                           Width="Auto"
                           Foreground="White"
                           Panel.ZIndex="103"
                           BorderBrush="Black"
                           Content="Select URLs"
                           Margin="15,8,15,410"
                           VerticalContentAlignment="Center"
                           Padding="0,0,5,0" />
                    <TextBox x:Name="URLInput"
                             Margin="15,35,120,380"
                             Text="Select URL"
                             TextWrapping="Wrap"
                             Panel.ZIndex="99"
                             HorizontalContentAlignment="Left"
                             GotFocus="ClearInputPlaceholder"
                             LostFocus="ResetInputPlaceholder"
                             VerticalContentAlignment="Center" />
                    <Button x:Name="ButtonAddURL"
                            Content="Add URL"
                            Click="AddURL"
                            HorizontalAlignment="Right"
                            Margin="0,35,15,0"
                            VerticalAlignment="Top"
                            Width="100"
                            Panel.ZIndex="99" />
                    <Label
                        Content="Queue"
                        Margin="15,85,0,0"
                        Foreground="White"
                        Panel.ZIndex="104"
                        Padding="0,0,5,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top" RenderTransformOrigin="0.481,1.493"/>
                    <ListBox x:Name="URLList"
                             d:ItemsSource="{d:SampleData ItemCount=3 }"
                             Margin="15,109,15,15"
                             Panel.ZIndex="100"
                             Background="#4C2E415A"
                             HorizontalContentAlignment="Stretch"
                             VerticalContentAlignment="Top"
                             BorderThickness="1"
                             BorderBrush="#FF304463" Padding="5,4,5,7">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid Width="Auto" Height="33">
                                    <TextBox Text="{Binding Path=Entry}" Width="Auto" Margin="0,2,256,1" FontFamily="Consolas" IsReadOnly="True" VerticalContentAlignment="Center">
                                        <TextBox.Style>
                                            <Style BasedOn="{StaticResource ResourceKey={x:Type TextBox}}" TargetType="{x:Type TextBox}">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type TextBox}">
                                                            <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1, 0, 0, 0" Background="{TemplateBinding Background}" SnapsToDevicePixels="True" CornerRadius="0, 15, 15, 0">
                                                                <ScrollViewer x:Name="PART_ContentHost" Focusable="false" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </TextBox.Style>
                                    </TextBox>
                                    <Button Width="150" HorizontalAlignment="Right" Click="InitIndividualDownload" Margin="0,2,101,1" Padding="0">
                                        <!-- Individual download button -->
                                        <Grid Width="140">
                                            <Label Content="{Binding Path=Label}" HorizontalContentAlignment="Left" HorizontalAlignment="Left" VerticalContentAlignment="Bottom" Width="115" Padding="8, 0, 0, 0" Foreground="White"/>
                                            <Ellipse HorizontalAlignment="Right" Width="20" Height="20">
                                                <Ellipse.Clip>
                                                    <CombinedGeometry GeometryCombineMode="Exclude">
                                                        <CombinedGeometry.Geometry1>
                                                            <CombinedGeometry GeometryCombineMode="Exclude">
                                                                <CombinedGeometry.Geometry1>
                                                                    <RectangleGeometry Rect="-1000,-1000,2000,2000"/>
                                                                </CombinedGeometry.Geometry1>
                                                                <CombinedGeometry.Geometry2>
                                                                    <EllipseGeometry  Center="10, 10" RadiusX="7" RadiusY="7"/>
                                                                </CombinedGeometry.Geometry2>
                                                            </CombinedGeometry>
                                                        </CombinedGeometry.Geometry1>
                                                        <CombinedGeometry.Geometry2>
                                                            <PathGeometry>
                                                                <PathGeometry.Figures>
                                                                    <PathFigureCollection>
                                                                        <PathFigure IsClosed="True" StartPoint="10,10">
                                                                            <PathFigure.Segments>
                                                                                <PathSegmentCollection>
                                                                                    <LineSegment Point="-1, 18" />
                                                                                    <LineSegment Point="-1, 2" />
                                                                                </PathSegmentCollection>
                                                                            </PathFigure.Segments>
                                                                        </PathFigure>
                                                                    </PathFigureCollection>
                                                                </PathGeometry.Figures>
                                                            </PathGeometry>
                                                        </CombinedGeometry.Geometry2>
                                                    </CombinedGeometry>
                                                </Ellipse.Clip>
                                                <Ellipse.Style>
                                                    <Style TargetType="Ellipse">
                                                        <Setter Property="Fill" Value="White" />
                                                        <Setter Property="Opacity" Value="0" />
                                                        <Setter Property="RenderTransform">
                                                            <Setter.Value>
                                                                <RotateTransform CenterX="10" CenterY="10" Angle="0"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsDownloading}" Value="True">
                                                                <DataTrigger.EnterActions>
                                                                    <BeginStoryboard>
                                                                        <Storyboard>
                                                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2" AutoReverse="False" />
                                                                            <DoubleAnimation Storyboard.TargetProperty="(TextBox.RenderTransform).(RotateTransform.Angle)" From="0" To="360" Duration="0:0:3" AutoReverse="False" RepeatBehavior="Forever" />
                                                                        </Storyboard>
                                                                    </BeginStoryboard>
                                                                </DataTrigger.EnterActions>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Ellipse.Style>
                                            </Ellipse>
                                        </Grid>
                                    </Button>
                                    <Button Content="Remove" Width="96" HorizontalAlignment="Right" Click="RemoveEntry" Margin="0,0,0,0" Padding="5,3,5,3" />
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <!-- ItemsSource="{Binding Source={StaticResource URLEntries}}" DisplayMemberPath="visualEntry" -->
                </Grid>
            </Border>
            <!--Button      x:Name="DownloadSingleButton"   Content="Download Single"   Click="DownloadSingle" Margin="108,251,107,0" VerticalAlignment="Top"/-->
            <!--Button      x:Name="DownloadPlaylistButton" Content="Download Playlist" Click="DownloadPlaylist" HorizontalAlignment="Left" Margin="108,217,0,0" VerticalAlignment="Top" Width="184" BorderThickness="0,0,0,0"/-->
            <!--CheckBox Content="CheckBox" HorizontalAlignment="Left" Margin="71,181,0,0" VerticalAlignment="Top"/-->
        </Grid>
        <Grid  Grid.Column="1" x:Name="FolderGroup" HorizontalAlignment="Stretch" VerticalAlignment="Top">
            <Border BorderBrush="Black" BorderThickness="1" Background="#3F46484A" CornerRadius="16" Margin="10,10,10,149">
                <Grid>
                    <Label x:Name="FolderLabel"
                           Content="Select folder"
                           Width="Auto"
                           Foreground="White"
                           Panel.ZIndex="103"
                           BorderBrush="Black"
                           Margin="15,8,15,410"
                           VerticalContentAlignment="Center"
                           Padding="0,0,5,0" VerticalAlignment="Top" Height="27"
                            />
                    <TextBox x:Name="FolderPathInput"
                             Margin="15,35,140,0"
                             Text="Select folder"
                             TextWrapping="Wrap"
                             VerticalAlignment="Top"
                             VerticalContentAlignment="Center"
                             TextChanged="UpdateFolder"
                             GotFocus="ClearInputPlaceholder"
                             LostFocus="ResetInputPlaceholder"/>
                    <Button x:Name="SelectedFolderInbput"
                            Content="Select Folder"
                            Click="SelectFolder"
                            HorizontalAlignment="Right"
                            Margin="0,35,15,0"
                            VerticalAlignment="Top"
                            Width="120" />
                    <Label  Content="Subfolder" Height="30" Margin="15,70,0,345" Padding="0,5,5,5" Foreground="White"/>
                    <TextBox x:Name="SubFolderPathInput" Height="30" Margin="15,102,452,313" TextChanged="UpdateSubFolder"/>
                    <Button x:Name="SubFolderPathSetButton" Margin="0,102,367,313"  Content="Set" Click="SetSubFolder" Width="80" HorizontalAlignment="Right"/>
                    <!-- Put in subfolder -->
                    <Border Height="30" Margin="0,102,140,0" BorderThickness="1" BorderBrush="Yellow" HorizontalAlignment="Right" VerticalAlignment="Top" Width="222" CornerRadius="15" Padding="6,0,0,0">
                        <Grid Height="30">
                            <Label Content="Put in subfolder" Foreground="White"/>
                            <Button Margin="145,0,-1,1" />
                        </Grid>
                    </Border>
                    <Border Height="30" Margin="0,152,251,0" BorderThickness="1" BorderBrush="Yellow" HorizontalAlignment="Right" VerticalAlignment="Top" Width="347" CornerRadius="15" Padding="6,0,0,0">
                        <Grid Height="30">
                            <Label Content="Infer subpath from playlist title" Foreground="White"/>
                            <Button Margin="145,0,-1,1" Width="80" HorizontalAlignment="Right" />
                        </Grid>
                    </Border>
                    <!-- Playlist toggle -->
                    <Border Height="32" Margin="15,150,603,0" BorderThickness="1" HorizontalAlignment="Left" BorderBrush="#FF304463" VerticalAlignment="Top" Width="160" CornerRadius="15">
                        <Grid Height="32">
                            <Label x:Name="LabelPlaylistToggle_Playlist" Content="Playlist" Foreground="White" HorizontalAlignment="Left" Width="78" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"/>
                            <Label x:Name="LabelPlaylistToggle_Single" Content="Single" Foreground="White" HorizontalAlignment="Right" Width="80" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Opacity="0.35"/>
                            <Button x:Name="ButtonPlaylistToggle" HorizontalAlignment="Left" Width="80" Click="TogglePlaylist" Padding="0,0,0,0" Margin="0,0,0,1"/>
                        </Grid>
                    </Border>
                    <Button
                        Content="Download"
                        HorizontalAlignment="Left"
                        Margin="15,298,0,0"
                        VerticalAlignment="Top"
                        Width="138"
                        Click="InitDownload" />
                    <CheckBox x:Name="CheckBoxRemoveWhenFinished" Content="Remove entries when downloaded" HorizontalAlignment="Left" Margin="15,266,0,0" VerticalAlignment="Top" Foreground="White"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
